# Техническое задание — Фаза 2 (полный вариант)

## 1. Назначение
- Сопровождение одобренных идей до передачи на внешние комиссии (ПК/НТК) и перевода в «Архив».
- Обеспечение прозрачной работы стейкхолдера и координатора через кастомные интерфейсы портала и Bitrix24.
- Контроль команд, задач, документов и уведомлений без дублирования функциональности Bitrix24.

## 2. Область охвата
### 2.1 Включено
1. Личный кабинет стейкхолдера (индикаторы «Новые идеи», стадии «Одобрена/Готово к ПК/Готово к НТК», переходы к задачам/документам/административной доске).
2. Управление командами идей (заявки, обязательные роли, CRM координатора, административная канбан-доска).
3. Автоматическое создание рабочей области Bitrix24 (канбан, диск, шаблоны) при статусе «Одобрена».
4. Интеграции с Bitrix24 для задач, документов, уведомлений.
5. Расширенные автоматизации и уведомления (см. разделы 10 и 11).
6. Полное описание бизнес-процессов (раздел 14) и интерфейсов (раздел 5).

### 2.2 Исключено
- Создание и модерация запросов/идей до статуса «На рассмотрении» (поток Фазы 1).
- Глубокая кастомизация Bitrix24 и разработка новых отчётов вне стандартных инструментов.

## 3. Роли и ответственность
| Роль | Ответственность |
|------|-----------------|
| Стейкхолдер | Публикация запросов, решения по идеям, контроль стадий и административных задач |
| Координатор | Настройка Bitrix24, управление заявками и ролями, отчётность, административные задачи |
| Автор/участник | Подача идей, вступление в команду, выполнение задач в Bitrix24, ответы на уведомления |
| Модератор | Проверка идей до публикации, контроль корректности данных |
| Эксперт/Ментор/Трекер | Обратная связь по задачам и подготовке к ПК/НТК |
| Руководство/PMO | Просмотр консолидированных отчётов и контроль KPI |

## 4. Жизненный цикл и статусы
- Запрос: Черновик → На сборе идей → Закрыт.
- Идея: Черновик → На модерации → На доработке ↺ → На рассмотрении → (Одобрена → Архив) \| Отклонена.
- Заявка в команду: На рассмотрении → (Принята \| Отклонена) → Архив.
- Задача Bitrix24: Новая → В работе → На проверке → (Возврат ↺ \| Готово) + флаг «Просрочено».
- Стадии портфеля стейкхолдера: «Одобрена», «Готово к ПК», «Готово к НТК».

## 5. Функциональные блоки (интерфейсы)
### 5.1 Главная страница
- Хедер с меню (Банк инноваций, Конкурсы, заглушки «Медиасентр»/«Обучение») и кнопкой входа.
- Промо-блоки «Как принять участие?» (CTA «Стать участником», «Подать заявку») и промо «Стать участником».

### 5.2 Страница «Банк инноваций»
- Панель фильтров: статус запроса, направление, поле «Автор» с автодополнением, поиск, сортировка.
- Грид карточек запросов: направление, статус (Активен = «На сборе идей», Закрыт), краткое описание, дедлайн, счётчик идей с подсветкой новых, кнопка «Подробнее».

### 5.3 Страница запроса
- Шапка: название, направление, статус, дедлайн, описание, вложения.
- Грид идей: карточки (раздел 5.4) + индикатор «• Новые» (сбрасывается после просмотра).
- Панель действий: «Редактировать запрос», «Закрыть запрос».
- Кнопка «Подать идею» (активна только при статусе «На сборе идей»).
- Модальное окно «Отправить на доработку»: поле причины, кнопки «Отправить/Отмена».

### 5.4 Карточка идеи (в списках)
- Поля: направление, статус, автор, краткое описание, дата, кнопка «Подробнее».
- Варианты:
  - Автор: цветовой бейдж статуса, индикатор новых комментариев (иконка чата), кнопки «Редактировать» (до «На рассмотрении») и «Открыть».
  - Стейкхолдер: бейдж стадии («Одобрена», «Готово к ПК», «Готово к НТК»), кнопки «Перейти к задачам/документам», ссылка на канбан.
  - Участник (не автор, статус «Одобрена»): кнопка «Вступить в команду», блок «Команда» с ролями.

### 5.5 Страница идеи
- Шапка: название, направление, статус, ссылка на запрос, бейдж стадии.
- Вкладки: «Описание», «Комментарии», «Вложения».
- Блоки:
  - Автор: «Мои документы», кнопка «Редактировать», индикатор обратной связи, кнопка «Открыть задачи в Bitrix24».
  - Участник: кнопка «Вступить в команду», блок «Команда».
  - Стейкхолдер: блок «Решение» (кнопки «Одобрить/Отклонить/Доработка»), кнопки «Перейти к задачам/документам».
- Модальное окно «Вступить в команду»: выбор роли, уровня компетенции, поле «Опыт/успехи», загрузка портфолио, чекбокс согласия, кнопки «Отправить/Отмена».

### 5.6 Страница создания идеи
- Хлебные крошки, кнопка «Назад к запросу».
- Поля: Название, Описание, Ожидаемый эффект, Направление, вложения, ссылки, чекбокс согласия (плюс read-only поле запроса).
- Кнопки: «Сохранить черновик», «Отправить на модерацию», «Отмена».
- Inline-валидация и баннеры состояния.

### 5.7 Личный кабинет участника
- Вкладки: «Мои идеи», «Заявки в команду», «Уведомления», «Профиль».
- «Мои идеи»: фильтры по статусам, карточки с индикаторами.
- «Заявки в команду»: подвкладки (Все/Входящие/Отправленные/Архив), карточки заявок, кнопка «Подать заявку».
- Карточка заявки (подраздел 6.3.1): статус, роль, компетенции, опыт, портфолио, контактные данные (read-only), кнопки «Принять», «Отклонить», «Запросить уточнение».
- «Уведомления»: лента событий.
- «Профиль»: аватар, ФИО, организация, роли, контакты, настройки уведомлений, кнопка «Открыть задачи в Bitrix24».

### 5.8 Личный кабинет стейкхолдера
- Вкладки: «Мои запросы» (карточки + индикатор «+N»), «Портфель одобренных идей» (бейджи стадий), «Панель управления» (кнопка «Открыть административную доску»), «Уведомления».
- Карточка запроса: блок деталей, грид идей, кнопки «Редактировать/Закрыть», панель примечаний координатора.

### 5.9 CRM модератора
- Список идей «На модерации» с фильтрами; карточка проверки (поля, вложения, комментарии, кнопки «Опубликовать», «Вернуть», «Отклонить»).

### 5.10 CRM координатора
- Страница «Команды идей»: таблица одобренных идей с фильтрами (направление, стадия, незаполненные роли).
- Карточка идеи: вкладки «Команда», «Кандидаты», «Журнал».
- Действия: «Пригласить в команду», «Принять/Отклонить/Запросить уточнение», «Закрепить роль».

### 5.11 Административная канбан-доска
- Колонки Новая → В работе → Ожидает данных → На согласовании → Готово.
- Карточки: заголовок, ссылка на сущность, чек-лист, дедлайн, исполнитель, комментарии.
- Создаётся автоматически по триггерам (см. раздел 9) или вручную координатором/стейкхолдером/модератором.

### 5.12 Детализированное описание интерфейсов

#### 5.12.1 Главная страница (публичная)
- Верхний хедер: пункты «Банк инноваций», «Конкурсы», заглушки «Медиасентр» и «Обучение», кнопка входа/аватар.
- Промо-блоки «Как принять участие?» с CTA «Стать участником» и «Подать заявку».
- Промо-блок «Стать участником» (переход к регистрации).

#### 5.12.2 Страница «Банк инноваций»
- Панель фильтров: статус запроса, направление, поле «Автор» с автодополнением, строка поиска, переключатель сортировки (дедлайн/дата создания).
- Грид карточек запросов: направление (Строительство/Эксплуатация/Безопасность/Цифровизация/Клиентский сервис/Другое), статус-чип (Активен = «На сборе идей», Закрыт), краткое описание, дедлайн, счётчик идей (подсветка новых), кнопка «Подробнее».

#### 5.12.3 Страница запроса
- Шапка: название, направление, статус («На сборе идей»/«Закрыт»), дедлайн, описание проблемы, вложения.
- Грид идей: карточки (см. 5.12.4) + индикатор «• Новые» (подсказка и авто-сброс после просмотра).
- Панель действий: «Редактировать запрос», «Закрыть запрос».
- Кнопка «Подать идею» (только для авторизованных участников, активна при статусе «На сборе идей»).
- Модальное окно «Отправить на доработку»: поле причины, кнопки «Отправить»/«Отмена» (уведомление автору отправляется автоматически).

#### 5.12.4 Карточка идеи в списках
- Поля: направление, статус (Черновик, На модерации, На доработке, На рассмотрении, Одобрена, Отклонена, Архив), автор, краткое описание, дата, кнопка «Подробнее» (страница идеи).
- Автор: бейдж статуса (цветовая схема), индикатор новых комментариев (иконка чата), кнопки «Редактировать» (до «На рассмотрении») и «Открыть карточку».
- Стейкхолдер: бейдж стадий («Одобрена», «Готово к ПК», «Готово к НТК» с цветами), кнопки «Перейти к задачам»/«Перейти к документам», ссылка на канбан идеи.
- Участник (не автор, статус «Одобрена»): кнопка «Вступить в команду», блок «Команда» (роль → участник).

#### 5.12.5 Страница идеи
- Шапка: название, направление, статус, ссылка на запрос, бейдж стадии (для «Одобрена»).
- Вкладки: «Описание», «Комментарии», «Вложения».
- Блоки:
  - Автор — «Мои документы», кнопка «Редактировать», индикатор обратной связи, кнопка «Открыть задачи в Bitrix24» (при «Одобрена»).
  - Участник — кнопка «Вступить в команду», блок «Команда».
  - Стейкхолдер — блок «Решение» (кнопки «Одобрить/Отклонить/Доработка»), кнопки «Перейти к задачам/документам».
- Модальное окно «Вступить в команду»: dropdown роли (Тимлид, Аналитик, Разработчик, Тестировщик, Коммуникационный специалист, Эксперт/Ментор, Дизайнер, DevOps/Инженер внедрения), мультиселект уровней (Junior/Middle/Senior/Expert), поле «Опыт/успехи», загрузка портфолио, чекбокс согласия, кнопки «Отправить заявку»/«Отмена».

#### 5.12.6 Страница создания идеи
- Хлебные крошки «Банк инноваций → <Запрос> → Новая идея», кнопка «Назад к запросу».
- Поля: Название, Описание, Ожидаемый эффект, Направление, поле запроса (read-only), зона загрузки файлов, поле ссылок, чекбокс согласия.
- Кнопки: «Сохранить черновик», «Отправить на модерацию», «Отмена».

#### 5.12.7 Личный кабинет участника
- Вкладки: «Мои идеи», «Заявки в команду», «Уведомления», «Профиль».
- «Мои идеи»: фильтры по статусам, карточки с индикаторами.
- «Заявки в команду»: подвкладки (Все/Входящие/Отправленные/Моя команда/Архив), карточки заявок (кнопки «Принять/Отклонить/Подробнее»), блок «Моя команда», кнопка «Подать заявку».
- Карточка заявки (подраздел 6.3.1): статус, роль, компетенции, опыт, портфолио, контактные данные (read-only), действия «Принять», «Отклонить», «Запросить уточнение».
- «Уведомления»: лента событий.
- «Профиль»: аватар, ФИО, организация, роли, контакты, настройки уведомлений, кнопка «Открыть задачи в Bitrix24».

#### 5.12.8 Личный кабинет стейкхолдера
- Вкладки: «Мои запросы» (карточки + индикатор «+N»), «Портфель одобренных идей» (карточки по стадиям), «Панель управления» (кнопка «Открыть административную доску»), «Уведомления».
- Карточка запроса: блок деталей, грид идей, кнопки «Редактировать/Закрыть», панель примечаний координатора.

#### 5.12.9 CRM модератора
- Список идей «На модерации» с фильтрами.
- Карточка проверки: поля идеи, вложения, комментарии, кнопки «Опубликовать», «Вернуть», «Отклонить», поле комментария.

#### 5.12.10 CRM координатора
- Страница «Команды идей»: таблица одобренных идей с фильтрами (направление, стадия, незаполненные роли).
- Карточка идеи: вкладки «Команда», «Кандидаты», «Журнал» и действия «Пригласить», «Принять/Отклонить/Запросить уточнение», «Закрепить роль».

#### 5.12.11 Административная канбан-доска
- Колонки: Новая → В работе → Ожидает данных → На согласовании → Готово.
- Карточка содержит заголовок, связанную сущность, чек-лист, дедлайн, исполнителя, комментарии.
- Карточки создаются автоматически по триггерам (раздел 9) или вручную координатором/стейкхолдером/модератором.

## 6. Пользовательские сценарии
- **Стейкхолдер:** отслеживает индикаторы «+N» в «Мои запросы», принимает решения в карточках идей, использует портфель и административную доску.
- **Координатор:** получает уведомление об одобрении, управляет заявками/ролями, контролирует Bitrix24 и административную доску, ведёт отчётность.
- **Автор/участник:** создаёт идеи, отвечает на решения, вступает в команды, работает в Bitrix24 и следит за уведомлениями.
- **Эксперт/Ментор/Трекер:** работает в задачах Bitrix24, оставляет комментарии, помогает в подготовке к ПК/НТК.
- **Руководство/PMO:** просматривает консолидированную отчётность, при необходимости открывает карточки запросов/идей.

## 7. UI/UX требования
- Подробные элементы описаны в разделе 5.
- Требования:
  - Все кнопки «Подробнее» ведут на отдельные страницы (запрос, идея, заявка).
  - Индикаторы («• Новые», «+N», счётчик чата, бейджи стадий) сбрасываются после просмотра соответствующего контента.
  - Вкладки «Уведомления» обязательны в кабинетах участника и стейкхолдера.
  - Страница создания идеи — отдельный экран (не модалка).

## 8. Данные и интеграции
- Расширение сущностей «Проект» и «Профиль» (данные о ролях, компетенциях, стадиях).
- Bitrix24 REST API: задачи, чек-листы, комментарии, файлы.
- Синхронизация журналов действий портала и Bitrix24.
- Уведомления через e-mail, push, внутреннюю ленту.

## 9. Таблица автоматизаций (кратко)
- Основные триггеры: отправка идеи на модерацию, возврат, решение стейкхолдера, дедлайн запроса, переход в «Одобрена», заявки в команду, добавление документа, просроченная задача, завершённая задача, готовность к ПК/НТК, перевод в «Архив».
- Каждый триггер создаёт уведомления и/или карточки административной доски (описано в разделах 10 и 11).

## 10. Уведомления
- Каналы: e-mail, push, внутренняя лента.
- Сценарии:
  - Автор получает уведомления о решениях модератора/стейкхолдера, возвратах, переводе в архив.
  - Координатор — о заявках, освобождении ролей, готовности к ПК/НТК, просроченных задачах.
  - Стейкхолдер — о новых идеях, готовности к ПК/НТК, переводе в архив.
  - Участник — о решениях по заявкам, назначении задач, новых документах.

## 11. Административная канбан-доска
- Типы карточек: модерация, контроль процессов (дедлайны, отчёты), формирование команд, решения стейкхолдера.
- Источники: автоматические триггеры (раздел 9) и ручное создание координатором/стейкхолдером/модератором.
- Каждая карточка содержит чек-лист, ссылку на сущность, историю действий.

## 12. Разделы Bitrix24
- Канбан задач: колонки Новая → В работе → На проверке → Возврат → Готово, чек-листы, вложения.
- Диск идеи: `/Требования`, `/План`, `/Прототипы`, `/Тесты`, `/ПК-НТК`, `/Отчёты`, `/Коммуникации`.
- Коммуникация: чаты и уведомления Bitrix24 используются для оперативной работы.

## 13. Матрица доступа (кратко)
- Принципы:
  - Стейкхолдер управляет запросами и решениями по идеям.
  - Координатор управляет командами, административными задачами, Bitrix24.
  - Участники имеют доступ к своим идеям, заявкам и задачам.
  - Bitrix24 наследует права от портала (участник видит только свои задачи, координатор — все по идее, стейкхолдер — обзорные панели).

## 14. Бизнес-процессы

### 14.1 Публикация запроса стейкхолдером
- **Инициатор:** стейкхолдер.
- **Шаги:**
  1. Заполнение черновика (поля проблема/критерии/сроки/направление, вложения).
  2. Публикация статуса «На сборе идей» (включает кнопку «Подать идею» для участников).
  3. Мониторинг вкладки «Мои запросы» — индикатор «+N» показывает новые идеи; при необходимости стейкхолдер редактирует или закрывает запрос.
  4. Закрытие по дедлайну (автоматически) либо вручную кнопкой «Закрыть запрос».
- **Артефакты:** карточка запроса, грид идей, кнопки «Подать идею»/«Редактировать»/«Закрыть», журнал статусов.

### 14.2 Подача и модерация идеи
- **Инициаторы:** автор, модератор, стейкхолдер.
- **Шаги:**
  1. Участник нажимает кнопку «Подать идею» и заполняет страницу создания (название, описание, ожидаемый эффект, направление, вложения, согласие).
  2. Сохраняет черновик или отправляет на модерацию → статус «На модерации».
  3. Модератор решает: «Опубликовать» (статус «На рассмотрении»), «Вернуть на доработку» (модальное окно причины, статус «На доработке»), «Отклонить».
  4. Автор дорабатывает и повторно отправляет.
  5. Стейкхолдер на странице идеи использует блок «Решение» (кнопки «Одобрить», «Отклонить», «Отправить на доработку»). Одобрение переносит идею в портфель одобренных идей; возврат требует причины; отклонение завершает процесс.
- **Артефакты:** страницы «Подать идею» и «Идея», модальное окно возврата, журнал решений и уведомления.

### 14.3 Формирование команды
- **Участники:** координатор, претенденты, стейкхолдер.
- **Шаги:**
  1. При статусе «Одобрена» участник видит кнопку «Вступить в команду» (модальное окно: роль, уровень, опыт, портфолио, согласие).
  2. Вкладка участника «Заявки в команду» отображает все заявки; координатор и автор получают уведомления.
  3. Координатор открывает карточку заявки (статус, роль, компетенции, опыт), принимает решение «Принять», «Отклонить» или «Запросить уточнение». Принятые участники появляются в блоке «Моя команда».
  4. Координатор приглашает людей из CRM (вкладки «Команда», «Кандидаты», «Журнал») и закрывает обязательные роли.
  5. Административная доска автоматически создаёт задачи («Рассмотреть заявку», «Освободилась роль», «Настроить рабочую область»).
- **Артефакты:** модальное окно заявки, вкладки «Заявки», CRM координатора, административные карточки.

### 14.4 Перевод идеи в «Одобрена» и запуск Bitrix24
- **Участники:** стейкхолдер, координатор, система.
- **Шаги:**
  1. Стейкхолдер нажимает «Одобрить» → статус «Одобрена».
  2. Автоматически создаются: канбан-доска `<ID идеи>`, структура Диска (`/Требования`, `/План`, `/Прототипы`, `/Тесты`, `/ПК-НТК`, `/Отчёты`, `/Коммуникации`), шаблонные карточки задач, гайды (README, task-guide, onboarding/quality/collaboration/mentoring).
  3. В карточке идеи появляются кнопки «Перейти к задачам»/«Перейти к документам», а в портфеле — бейдж стадии.
  4. Участники и координатор получают приглашения; административная доска фиксирует задачу «Настроить рабочую область».
- **Артефакты:** канбан и Диск Bitrix24, кнопки переходов, административные задачи.

### 14.5 Исполнение и сопровождение
- **Участники:** команда идеи, координатор, стейкхолдер, эксперты/менторы/трекеры.
- **Шаги:**
  1. Работа по задачам Bitrix24 (канбан, чек-листы, комментарии, вложения).
  2. Управление документами через Диск (структура папок).
  3. Координатор контролирует просрочки, обновляет отчётность и назначает административные задачи.
  4. Эксперты/менторы оставляют комментарии и рекомендации.
  5. Участники и стейкхолдер отслеживают события во вкладке «Уведомления».
- **Артефакты:** карточки задач, структура Диска, административная доска, вкладки «Комментарии»/«Уведомления».

### 14.6 Подготовка к ПК/НТК
- **Участники:** координатор, стейкхолдер, команда.
- **Шаги:**
  1. Координатор проходит чек-лист готовности (регламент проекта) и отмечает выполнение.
  2. Документы загружаются в `/ПК-НТК`; бейдж стадии меняется на «Готово к ПК» или «Готово к НТК».
  3. Стейкхолдер проверяет материалы, использует кнопки перехода, подтверждает готовность.
  4. Результаты комиссий фиксируются в комментариях и административных карточках.
- **Артефакты:** чек-листы, папка `/ПК-НТК`, бейджи стадий, административные задачи.

### 14.7 Перевод в «Архив»
- **Участники:** стейкхолдер, координатор, система уведомлений.
- **Шаги:**
  1. Стейкхолдер переводит идею в статус «Архив».
  2. Закрывается доступ к задачам Bitrix24, отправляются уведомления команде.
  3. Координатор актуализирует итоговый отчёт и архив документов, фиксирует ссылку на внешний проект.
- **Артефакты:** карточка идеи в статусе «Архив», отчёты, уведомления.

### 14.8 Поддерживающие процессы
- Уведомления, отчётность, чек-листы и матрица доступа реализуются через интерфейсы и разделы этого документа (статусы — раздел 4, интерфейсы — раздел 5, автоматизации — раздел 9, уведомления — раздел 10, административная доска — раздел 11, доступы — раздел 13).

### 14.9 Высокоуровневая схема
1. Стейкхолдер публикует запрос и отслеживает индикатор «+N».
2. Участник подаёт идею, проходит модерацию и получает решение стейкхолдера.
3. Одобренная идея получает команду и рабочую область Bitrix24.
4. Команда работает, готовится к ПК/НТК, после чего идея переводится в «Архив».

## 15. Приёмочные критерии
1. Кнопка «Подать идею» и страница создания доступны на активных запросах; черновик/отправка корректно меняют статус на «На модерации».
2. В кабинете стейкхолдера отображаются индикаторы «+N» и бейджи стадий, а кнопки переходят к задачам/документам/административной доске.
3. Модальные окна «Отправить на доработку» и «Вступить в команду» требуют обязательных полей (причина, роль, компетенции, согласие).
4. Управление заявками обновляет состав команды, создаёт уведомления и административные карточки.
5. Переход в «Одобрена» автоматически разворачивает Bitrix24 (канбан, диск, шаблоны).
6. В портфеле корректно отображаются стадии «Одобрена/Готово к ПК/Готово к НТК» с рабочими ссылками.
7. Административная доска содержит задачи по всем триггерам («Рассмотреть заявку», «Освободилась обязательная роль», «Настроить рабочую область» и др.).
8. Все уведомления из раздела 10 отрабатывают по сценариям (подача, решения, заявки, документы, просрочки, готовность к ПК/НТК, архив).

## 16. Зависимости и предпосылки
- Bitrix24 доступен через REST API; учётные записи всех ролей активированы.
- Шаблоны сайтов и структуры (`/local/templates/<site>`, гайды, чек-листы) согласованы и размещены.
- Система уведомлений (e-mail, push, внутренняя лента) настроена и интегрирована.
- Статусы и матрица доступа из разделов 4 и 13 приведены в актуальное состояние до запуска Фазы 2.
