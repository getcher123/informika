# Техническое задание — Фаза 3 (Informika) — краткая версия

## 1. Цели

- **Портфель проектов (публично, read-only):** одобренные идеи и опубликованные кейсы.
- **Календарь мероприятий (публично):** онлайн/офлайн события, регистрация, напоминания, материалы после события.
- **Минимальная аналитика:** короткие блоки статистики по ролям + **экспорт только в Excel** (без CSV/PDF).
- **Надёжность:** портал работает на сохранённых данных при временной недоступности Bitrix24.

## 2. Источник правды

- Все **решения, статусы, задачи, команда, приглашения, рабочие области** — в **Bitrix24**.
- Портал — **витрина и read-only интерфейс**, хранит копию нужных данных для быстрого отображения.

## 3. Включено / исключено

**Включено**
- Публичный `Портфель проектов` (вкладки `Одобренные идеи` / `Кейсы`).
- Публичный календарь событий + регистрация + e-mail уведомления.
- Блоки статистики по ролям + выгрузки Excel.
- Интеграционная надёжность (кэширование, показ последнего успешного обновления).

**Исключено**
- Управление командами/ролями/приглашениями (только Bitrix24).
- Подписки/дайджест/центр уведомлений как продукт (перенесено на следующий релиз).
- Внешние системы аналитики.

## 4. Ключевые сущности и статусы

**Кейс (результат архивного проекта)**
- Статус публикации: `Черновик` → `Опубликовано` → `Снято с публикации` (повторная публикация возможна).
- Публично видны **только** кейсы `Опубликовано`.

**Событие**
- Статусы: `Черновик` → `Опубликовано` → `Завершено/Отменено` → `Архив`.
- `Будущие/Прошедшие` — **группировка по времени**, а не статус.

**Регистрация на событие**
- Статусы: `Активна` / `Отменена пользователем` / `Отменена организатором`.

## 5. Основные сценарии

### 5.1 Архивация проекта и кейс

- Стейкхолдер переводит идею `Одобрена` в `Архив` и заполняет **сопроводительное сообщение**.
- При архивации:
  - рабочая область в Bitrix24 переводится в завершение/архив;
  - портал фиксирует минимальную статистику на дату архивации;
  - в карточке архивного проекта появляется действие `Создать кейс` (необязательно).
- Стейкхолдер создаёт кейс (первое сохранение — статус `Черновик`), заполняет карточку (описание, результат, показатели, материалы) и **сам публикует**.

### 5.2 Портфель проектов (публично)

- Одна страница с вкладками:
  - `Одобренные идеи` — только идеи со статусом `Одобрена` (read-only).
  - `Кейсы` — только кейсы со статусом публикации `Опубликовано` (read-only).

### 5.3 События (календарь)

- Публичные представления: `Календарь (месяц/неделя)` и `Список`.
- Фильтры: `Когда (Будущие/Прошедшие)`, `Формат`, `Направление`, поиск.
- Регистрация доступна гостю (ФИО, e-mail, роль, согласие на обработку ПДн).
- E-mail уведомления:
  - подтверждение регистрации;
  - напоминания за 24 часа и за 2 часа;
  - уведомление об отмене/переносе (если было изменение);
  - письмо с материалами после события (по действию координатора).
- Кнопка `Добавить в календарь (.ics)` для будущих опубликованных событий.

## 6. Статистика и экспорт (минимальный набор)

Общее:
- Все экраны статистики — **только просмотр**.
- Данные из Bitrix24 обновляются **каждые 30 минут**, на экранах показывается время последнего успешного обновления.
- Экспорт: **только Excel**, по текущему контексту/фильтрам.

**Публично: Банк инноваций (за 7 дней)**
- `Новые запросы`, `Подано идей`, `Идей одобрено`, `Идей отклонено`. Экспорта нет.

**Участник: “Мой вклад”**
- `Идей предложено`, `Идей одобрено`, `Проектов в реализации`, `Моё место среди активных участников (30 дней)`. Экспорта нет.

**Стейкхолдер**
- `Мои запросы`: `Новых идей (7 дней)`, `Активных авторов (7 дней)`, `Решений принято (7 дней)`, `Идей на решение (сейчас)`.
- `Портфель идей`: `Идей в реализации`, `Идей с рисками`, `Задач на 7 дней`.
- `Админ. панель`: личные задачи Bitrix24 (активные/просроченные/на 7 дней) + таблица. Экспорт Excel.

**Координатор (в Bitrix24)**
- Единый график `Воронка обработки идей (сейчас)` (по статусам), блоки `Риски реализации` и метрики задач координатора.

**Руководство**
- Минимальный набор критичных метрик: “Сейчас” (активные запросы, идеи на решение, проекты в реализации, проекты с риском) + “За период” (новые запросы, подано идей, решений принято, доля одобрения, архивировано, опубликовано кейсов) + воронка результатов. Экспорт Excel.

## 7. Интеграции и надёжность

- Портал хранит копию данных, нужных для портфеля проектов, событий и статистики.
- При недоступности Bitrix24:
  - показываются последние сохранённые данные;
  - выводится предупреждение о неактуальности;
  - доступна кнопка `Повторить` для обновления.

## 8. Приёмка (кратко)

- Портфель проектов публично доступен, read-only, и содержит только `Одобренные идеи` и `Опубликованные кейсы`.
- Календарь событий работает (календарь/список), регистрация гостя фиксируется, письма и кнопка `.ics` работают.
- Статистика соответствует минимальному набору, экспорт только в Excel.
- При сбоях Bitrix24 портал не «падает» и показывает последнюю успешную копию данных.
