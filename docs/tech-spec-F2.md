# Техническое задание — Фаза 2 (Informika)

## 1. Назначение и цели
- Обеспечить сопровождение одобренных идей до передачи на внешние комиссии (ПК/НТК).
- Предоставить кастомный личный кабинет стейкхолдера для контроля хода работ и принятия решений.
- Интегрировать контур задач, документов и командной коммуникации через Bitrix24 без дублирования функциональности в ядре портала.
- Провести унификацию статусов, ролей и артефактов с Фазой 1 и расширенным ТЗ ([informika-extended-tz.md](informika-extended-tz.md)).

## 2. Область охвата
### Включено
1. Персональный кабинет стейкхолдера с обзором одобренных идей (статусы, прогресс, риски).
2. Переход от статуса «Одобрена» к рабочему пространству Bitrix24 (задачи, документы, коммуникации).
3. Управление командой идеи: назначение обязательных ролей, контроль заявок, доступ к Bitrix24.
4. Базовая отчётность по статусам задач и активности команды (через Bitrix24, ссылка из портала).
5. Расширенные уведомления и автоматизации для этапов Фазы 2 (см. [automation-table.md](automation-table.md), [notification-table.md](notification-table.md)).
6. Актуализация матрицы доступа и статусов (см. [access-matrix.md](access-matrix.md), [statuses-table.md](statuses-table.md)).

### Исключено
- Полная кастомизация интерфейсов Bitrix24 (используются штатные компоненты).
- Создание отчетов

## 3. Роли и права
| Роль | Основные действия в Ф2 |
|------|-----------------------|
| Стейкхолдер | Просмотр портфеля одобренных идей, просмотр отчётов, запуск решений (ПК/НТК), комментарии. |
| Координатор | Настройка доступа к Bitrix24, контроль статусов задач, обработка заявок в команду, формирование отчётов. |
| Автор идеи / участник | Работа с командой, доступ к задачам и документам через Bitrix24, ответы на уведомления. |
| Модератор | Мониторинг корректности данных, контроль переходов статусов, эскалации. |
| Эксперт / Ментор / Трекер | Подключение к задачам Bitrix24 по назначению, предоставление обратной связи. |

## 4. Жизненный цикл и статусы
- Используются статусы из [statuses-table.md](statuses-table.md) (идея, запрос, заявка, задача Bitrix24).
- Переход «Одобрена → Архив» инициируется после завершения работ и подготовки пакета документов для ПК/НТК.
- Статус «Архив» фиксирует превращение идеи в проект вне платформы (см. [README.md](README.md), §3).

## 5. Функциональные блоки
### 5.1 Кабинет стейкхолдера
- Страница «Портфель идей»: колонки «Одобрена», «Готово к ПК», «Готово к НТК», карточки со счётчиками задач и рисков.
- Карточка одобренной идеи: вкладки «Обзор», «Задачи», «Документы», «Команда», «Решения», «История».
  - «Обзор» отображает ключевые показатели и дедлайны.
  - «Задачи»/«Документы»/«Отчёты» открывают соответствующие разделы Bitrix24 (без дублирования внутри портала).
  - «Команда» выводит состав участников и их роли (источник данных — [informika-extended-tz.md](informika-extended-tz.md), §4.9).
- Настройка фильтров и поиска по направлениям, подразделениям, датам обновления.

### 5.2 Управление командой
- Отображение заявок в команду с действиями «Принять», «Отклонить», «Запросить уточнение» (аналогично Ф1, но с авторизацией в Bitrix24).
- Контроль обязательных ролей: предупреждения при пустых слотах, ссылки на Bitrix24 для назначения задач.
- Логирование действий (принятие/исключение участника) с выводом в разделе «История».

### 5.3 Интеграция с Bitrix24
- При статусе идеи «Одобрена» автоматически создаётся рабочая область: папки на Диске, шаблоны задач, чат (см. [automation-table.md](automation-table.md)).
- В портале отображаются ссылки на рабочую область; авторизация проходит через единый аккаунт (SSO или отдельные учётные данные — решение инфраструктуры).
- Просроченные задачи подсвечиваются на карточке идеи (данные забираются из Bitrix API).

### 5.4 Отчётность и аналитика
- В карточке стейкхолдера доступна кнопка «Открыть отчёты» (ведёт на стандартные отчёты Bitrix24 с преднастроенными фильтрами).
- В портале отображаются агрегированные показатели: количество активных задач, просроченных задач, процент выполнения чек-листов.
- Экспорт CSV/Excel из Bitrix24 (по ссылке) для последующей загрузки в корпоративные системы.

### 5.5 Уведомления и автоматизации
- Используются сценарии из `notification-table.md` и `automation-table.md` (разделы «Фаза 2»). Ключевые триггеры:
  - Создание рабочей области после «Одобрена».
  - Изменения статуса идеи (Например, «Готово к ПК», «Архив»).
  - Исключение обязательной роли из команды.
  - Просрочка задач Bitrix24.

### 5.6 Доступ и безопасность
- Права доступа описаны в `access-matrix.md`.
- Переходы статусов фиксируются в журнале и доступны модератору.
- Все ссылки на Bitrix24 передают токен/сессию согласно корпоративной политике.

## 6. Пользовательские сценарии
### Стейкхолдер
1. Переходит в кабинет → видит карточки одобренных идей.
2. Открывает выбранную идею → просматривает вкладку «Обзор» → при необходимости переходит к задачам/документам в Bitrix24.
3. Отмечает готовность к ПК → система отправляет уведомления команде (см. [notification-table.md](notification-table.md)).

### Координатор
1. Получает уведомление о статусе «Одобрена» → заходит в карточку → проверяет состав команды.
2. При необходимости инициирует назначение ролей → система верифицирует обязательные слоты.
3. Отслеживает просроченные задачи на базе Bitrix24 и эскалирует стейкхолдеру.

### Участник
1. Получает приглашение в команду → подтверждает участие → получает ссылку на рабочее пространство Bitrix24.
2. Работает с задачами и документами (внешний интерфейс Bitrix24) → комментарии дублируются в истории идеи.

## 7. UI/UX требования
- Навигация и элементы базируются на описании в [interface-elements.md](interface-elements.md) (разделы «ЛК стейкхолдера», «Bitrix24», «Уведомления»).
- Все кнопки, приводящие к Bitrix24, визуально помечены и открываются в новой вкладке.
- Заглушки «Медиасентр» и «Обучение» остаются без изменений (функциональность Ф3).

## 8. Данные и интеграции
- Дополняются сущности «Проект» и «Профиль» согласно §10 [informika-extended-tz.md](informika-extended-tz.md).
- Интеграция с Bitrix24 выполняется через REST API (чтение статусов задач, чек-листов, метрики активности).
- Логи действий (принятие роли, перевод статуса) сохраняются в базе портала и синхронизируются с Bitrix-таймлайном при наличии интеграции.

## 9. Приёмочные критерии
1. Перевод идеи в «Одобрена» автоматически создаёт область в Bitrix24 и отправляет уведомления (см. [automation-table.md](automation-table.md)).
2. Кабинет стейкхолдера отображает актуальные статусы задач и состав команды.
3. Любой переход статуса (включая «Архив») фиксируется и уведомляет заинтересованных лиц.
4. Нет дублирования функциональности задач/документов на портале — все операции происходят в Bitrix24.
5. Матрица доступа соблюдается: участник без приглашения не может открыть карточку одобренной идеи.

## 10. Зависимости и предпосылки
- Должны быть настроены рабочие пространства Bitrix24 и учетные записи для всех ролей.
- API Bitrix24 доступно для чтения данных о задачах и документах.
- Наличие инфраструктуры уведомлений (e-mail, push, внутренняя шина) из Ф1.

## 11. Ссылки на дополнительные документы
- Расширенное ТЗ: [informika-extended-tz.md](informika-extended-tz.md)
- ТЗ Фазы 1: [tech-spec-F1.md](tech-spec-F1.md)
- Матрица доступа: [access-matrix.md](access-matrix.md)
- Таблица автоматизаций: [automation-table.md](automation-table.md)
- Таблица уведомлений: [notification-table.md](notification-table.md)
- Таблица статусов сущностей: [statuses-table.md](statuses-table.md)
- Таблица отчётности по ролям: [report-table.md](report-table.md)
- Чек-листы по ролям: [role-checklists.md](role-checklists.md)
- Описание интерфейсов: [interface-elements.md](interface-elements.md)
- Отчёт Фазы 1: [reports/phase1-summary.md](reports/phase1-summary.md)
